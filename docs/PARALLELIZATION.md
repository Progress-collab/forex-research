# Параллелизация оптимизации

## Реализовано

### Параллелизация CPU
- Добавлена поддержка параллельного выполнения бэктестов через `ProcessPoolExecutor`
- Параметр `n_jobs` контролирует количество параллельных процессов
- При `n_jobs=1` выполняется последовательно (оригинальное поведение)
- При `n_jobs > 1` выполняется параллельно на нескольких ядрах CPU

### Прогресс-бар
- Автоматическое определение наличия библиотеки `tqdm`
- Если `tqdm` установлен, отображается прогресс-бар с процентом выполнения
- Если `tqdm` не установлен, выполнение продолжается без прогресс-бара

### Использование

```bash
# Последовательное выполнение (по умолчанию)
python scripts/optimize_strategy.py --strategy momentum_breakout --instrument EURUSD --period m15

# Параллельное выполнение на 4 ядрах
python scripts/optimize_strategy.py --strategy momentum_breakout --instrument EURUSD --period m15 --n-jobs 4

# Параллельное выполнение на всех доступных ядрах (обычно 4-8)
python scripts/optimize_strategy.py --strategy momentum_breakout --instrument EURUSD --period m15 --n-jobs -1
```

### Ожидаемое ускорение
- При использовании 4 ядер: ускорение в 3-4 раза
- При использовании 8 ядер: ускорение в 6-8 раз
- Зависит от количества ядер CPU и сложности бэктестов

### Технические детали
- Используется `concurrent.futures.ProcessPoolExecutor` для создания процессов
- Каждый процесс создает свой экземпляр `FullBacktestRunner` и загружает данные независимо
- Стратегии создаются в каждом процессе на основе имени стратегии и параметров
- Результаты собираются и обрабатываются в главном процессе
- Ошибки в отдельных процессах не останавливают оптимизацию

### Установка tqdm (опционально)
Для отображения прогресс-бара установите `tqdm`:
```bash
pip install tqdm
```

### Ограничения
- На Windows требуется запуск через `if __name__ == "__main__"` (уже реализовано в скрипте)
- Каждый процесс использует свою память для данных (может увеличить потребление памяти)
- Для очень больших датасетов может потребоваться ограничение количества процессов

